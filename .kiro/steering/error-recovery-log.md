---
inclusion: always
---

# 错误恢复日志 - GUI 电脑版

本文档记录 Open-AutoGLM GUI 电脑版项目实际发生的错误和成功的恢复方案。

## 日志格式

每个条目包含：
- **日期**: 错误发生时间
- **任务**: 正在执行的任务
- **错误**: 具体错误现象
- **原因**: 根本原因分析
- **解决方案**: 成功的修复步骤
- **预防措施**: 如何避免再次发生

---

## 示例条目（请在实际使用时替换）

### 2024-12-18: GUI 构建失败 - PyInstaller 错误

**任务:** 使用 PyInstaller 构建 GUI.exe

**错误现象:**
```
ModuleNotFoundError: No module named 'xxx'
或
Failed to execute script due to unhandled exception
```

**原因分析:**
- 依赖包未正确打包
- 隐藏导入未声明
- 资源文件路径错误

**解决方案:**
1. 检查 requirements.txt 中的所有依赖
2. 在 build_gui.spec 中添加 hiddenimports
3. 确认资源文件路径使用相对路径
4. 重新执行 build_gui_with_progress.bat

**预防措施:**
- 构建前先测试 gui_app.py 能否正常运行
- 检查 spec 文件中的 hiddenimports 列表
- 使用虚拟环境避免依赖冲突

---

### 2024-12-18: ADB 连接失败

**任务:** 连接 Android 设备

**错误现象:**
```
error: no devices/emulators found
或
adb server version doesn't match this client
```

**原因分析:**
- ADB 服务未启动
- 设备未开启 USB 调试
- ADB 版本冲突

**解决方案:**
1. 检查设备是否开启 USB 调试
2. 执行 `adb kill-server` 然后 `adb start-server`
3. 检查 platform-tools 路径是否正确
4. 验证设备连接：`adb devices`

**预防措施:**
- 在 GUI 中添加 ADB 状态检查
- 提供清晰的设备连接指引
- 自动检测并重启 ADB 服务

---

### 2024-12-18: API 调用失败

**任务:** 调用 GLM API 执行任务

**错误现象:**
```
API key invalid
或
Connection timeout
或
Rate limit exceeded
```

**原因分析:**
- API key 未配置或错误
- 网络连接问题
- API 调用频率超限

**解决方案:**
1. 检查 API key 配置是否正确
2. 测试网络连接
3. 添加重试机制和错误处理
4. 实现请求频率限制

**预防措施:**
- 在 GUI 启动时验证 API key
- 添加网络状态检测
- 实现智能重试和降级策略
- 显示清晰的错误提示

---

## 待记录的错误类型

以下是常见的错误类型，遇到时应记录详细信息：

### 构建相关
- [ ] PyInstaller 打包失败
- [ ] 依赖缺失
- [ ] 资源文件未打包
- [ ] 编译错误

### 运行时错误
- [ ] GUI 启动失败
- [ ] 界面卡死或崩溃
- [ ] 配置文件读取错误
- [ ] 日志记录失败

### 设备交互
- [ ] ADB 连接失败
- [ ] 设备控制失败
- [ ] 截图失败
- [ ] 输入失败

### API 相关
- [ ] API 调用失败
- [ ] 响应解析错误
- [ ] 超时问题
- [ ] 认证失败

### 文件操作
- [ ] 配置文件损坏
- [ ] 日志文件写入失败
- [ ] 临时文件清理问题
- [ ] 路径错误

## 使用指南

### 记录新错误
当遇到新的错误时：
1. 复制上面的模板
2. 填写所有字段（日期、任务、错误、原因、解决方案、预防措施）
3. 确保解决方案可重现
4. 添加到本文档

### 查询历史错误
执行任务前：
1. 搜索相关关键词
2. 查看是否有类似错误
3. 参考成功的解决方案
4. 避免重复错误

### 更新现有条目
如果发现更好的解决方案：
1. 找到相关条目
2. 添加新的解决方案
3. 标注哪个方案更优
4. 保留历史信息供参考

## 统计信息

- 总错误记录数: 3（示例）
- 最常见错误类型: 构建失败、ADB 连接、API 调用
- 平均解决时间: 待统计
- 重复错误率: 待统计

## 改进建议

基于错误日志，以下是改进建议：

1. **自动化检查**: 为常见错误添加预检查脚本
2. **文档完善**: 将频繁出现的问题添加到 README
3. **工具优化**: 开发辅助工具减少人为错误
4. **流程改进**: 优化开发流程，减少错误发生
5. **错误提示**: 在 GUI 中添加更友好的错误提示

---

**注意**: 本文档应该持续更新，每次遇到新错误并成功解决后，都应该添加记录。
